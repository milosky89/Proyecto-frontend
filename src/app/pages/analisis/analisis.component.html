<div class="col-12">
  <div class="card" style="border-radius: 1rem; box-shadow: 0 1rem 1rem rgba(0, 0, 0, 0.4);">
    <div class="card-body">
      <h6>Seleccione la variable y el tipo de gráfico que desea visualizar</h6>

      <form [formGroup]="graficaForm">

        <div  class="form-row align-items-center ">
          <div class="col-md-5">
            <select class="form-control" formControlName="listaGraficos">
              <option value="" selected>Tipo de gráfico</option>
              <option *ngFor="let listaGraficos of listaGraficos" [value]="listaGraficos">
                {{listaGraficos}}
              </option>
            </select>
          </div>
        </div>
        <br>
        <div  class="form-row align-items-center "  *ngIf="graficaForm.get('listaGraficos').value === 'Barras'" >
          <div class="col-md-5" >
            <select class="form-control" formControlName="listaVariables">
              <option value="" selected>Variable</option>
              <option *ngFor="let listaVariables of listaVariables" [value]="listaVariables">
                {{listaVariables}}
              </option>
            </select>
          </div>
          <button type="submit" class="btn btn-primary mr-1" (click)="consultas()">Generar gráfica</button>
          <button type="submit" class="btn btn-danger mb-0" (click)="limpiar()">Limpiar </button>
        </div>
        <div class="form-row align-items-center " *ngIf="graficaForm.get('listaGraficos').value === 'Circular'">
          <div class="col-md-4">

            <select class="form-control" formControlName="listaVariables">
              <option value="" selected>Variable</option>
              <option *ngFor="let listaVariables of listaVariables" [value]="listaVariables">
                {{listaVariables}}
              </option>
            </select>

          </div>
          <div class="col-md-4">
            <select class="form-control" formControlName="listaComunas">
              <option value="" selected>Comuna</option>
              <option *ngFor="let listaComunas of listaComunas" [value]="listaComunas">
                {{listaComunas}}
              </option>
            </select>

          </div>
          <div class="col-4">
            <button type="button" class="btn btn-primary mr-1" (click)="graficaTorta()">Generar gráfica</button>
            <button type="button" class="btn btn-danger" >Limpiar</button>
          </div>
        </div>

      </form>
      <br>
      <br>

    </div>
  </div>
</div>

<div class="col-lg-12 col-xlg-9 col-md-7" *ngIf="cargando">
  <div class="alert alert-info text-center">
    <h4 class="alert-heading">Cargando</h4>
    <i class="fa fa-spin fa-refresh fa-2x"></i>
    <p class="mb-0">Por favor espere</p>
  </div>

</div>

<div class="row">
  <!-- column -->
  <div class="col-8" *ngIf="graficaForm.get('listaGraficos').value === 'Barras'" >
    <div class="card" style="border-radius:1rem;  box-shadow: 0 1rem 1rem rgba(0, 0, 0, 0.4);">
      <div class="card-body" *ngIf="!cargando;">
        <h2 style="color: #009efb" class="card-title">Gráfica</h2>
        <div style="display: block" *ngIf="barChartData">
          <canvas baseChart  [datasets]="barChartData" [labels]="barChartLabels" [options]="barChartOptions"
            [plugins]="barChartPlugins" [legend]="barChartLegend" [type]="barChartType">
          </canvas>

        </div>
      </div>
    </div>
  </div>
</div>
  <!-- column -->

    <!-- column -->
    <div class="col-8" *ngIf="graficaForm.get('listaGraficos').value === 'Circular'">
      <div class="card" style="border-radius:1rem;  box-shadow: 0 1rem 1rem rgba(0, 0, 0, 0.4);">
        <div class="card-body">
          <h2 style="color: #009efb" class="card-title">Gráfica 2</h2>
          <div style="display: block" >
            <div style="display: block" *ngIf="pieChartData">
              <canvas baseChart
                      [data]="pieChartData"
                      [type]="pieChartType"
                      [options]="pieChartOptions"
                      [plugins]="pieChartPlugins">
              </canvas>
            </div>
          </div>
        </div>
      </div>
    </div>

